import{_ as e,r as p,o,c as l,b as n,d as c,w as i,e as s,a}from"./app-9c0a74f5.js";const u={},r=a('<h1 id="代付下单接口" tabindex="-1"><a class="header-anchor" href="#代付下单接口" aria-hidden="true">#</a> 代付下单接口</h1><h3 id="接口地址" tabindex="-1"><a class="header-anchor" href="#接口地址" aria-hidden="true">#</a> 接口地址</h3><p><code>POST /api/v1/transfers</code></p><h3 id="请求参数" tabindex="-1"><a class="header-anchor" href="#请求参数" aria-hidden="true">#</a> 请求参数</h3>',4),d=n("thead",null,[n("tr",null,[n("th",null,"参数"),n("th",null,"类型"),n("th",null,"必填"),n("th",null,"参与签名"),n("th",null,"说明"),n("th")])],-1),k=n("tr",null,[n("td",null,"client_key"),n("td",null,"string"),n("td",null,"是"),n("td",null,"是"),n("td",null,"商户标识。由大洋支付颁发。"),n("td")],-1),v=n("tr",null,[n("td",null,"amount"),n("td",null,"string"),n("td",null,"是"),n("td",null,"是"),n("td",null,"代付金额。"),n("td")],-1),g=n("td",null,"channel_id",-1),m=n("td",null,"string",-1),b=n("td",null,"是",-1),h=n("td",null,"是",-1),_=n("td",null,"代付通道ID。",-1),q=n("tr",null,[n("td",null,"out_transfer_no"),n("td",null,"string"),n("td",null,"是"),n("td",null,"是"),n("td",null,"商户代付订单号。"),n("td")],-1),f=n("tr",null,[n("td",null,"notify_url"),n("td",null,"string"),n("td",null,"是"),n("td",null,"是"),n("td",null,"商户接收通知的网址。"),n("td")],-1),y=n("tr",null,[n("td",null,"payee_account"),n("td",null,"string"),n("td",null,"是"),n("td",null,"是"),n("td",null,"收款人账号。"),n("td")],-1),$=n("tr",null,[n("td",null,"payee_name"),n("td",null,"string"),n("td",null,"是"),n("td",null,"是"),n("td",null,"收款人姓名。"),n("td")],-1),x=n("tr",null,[n("td",null,"extra"),n("td",null,"string"),n("td",null,"特殊的"),n("td",null,"是"),n("td",null,[s("业务参数。"),n("br"),s("必填时必须是 "),n("code",null,"JSON"),s(" 字符串。")]),n("td")],-1),S=n("tr",null,[n("td",null,"signature"),n("td",null,"string"),n("td",null,"是"),n("td",null,"否"),n("td",null,"签名值。"),n("td")],-1),T=a(`<div class="custom-container warning"><p class="custom-container-title">WARNING</p><p><code>extra</code> 参数说明：您可以理解为 <code>required_if</code>，也就是说特定的场景为必填，且需提交的参数可能不一样，请参考代付接口的业务参数。例：越南银行代付，<code>extra.bank_code</code> 必填。</p></div><p>示例：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;client_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;01hcd0d0c2qh9wy5efm5sxrk38&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5003&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;out_transfer_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20230101000000&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;notify_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/notify/url&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;payee_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;payee_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sammy Shark&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;extra&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;bank_code\\&quot;:\\&quot;BANK\\&quot;}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;signature&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="响应参数" tabindex="-1"><a class="header-anchor" href="#响应参数" aria-hidden="true">#</a> 响应参数</h3><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>client_key</td><td>string</td><td>商户标识。由大洋支付颁发。</td></tr><tr><td>amount</td><td>string</td><td>代付金额。</td></tr><tr><td>transfer_no</td><td>string</td><td>代付订单号。</td></tr><tr><td>out_transfer_no</td><td>string</td><td>商户代付订单号。</td></tr><tr><td>channel_id</td><td>string</td><td>代付通道ID。</td></tr><tr><td>payee_account</td><td>string</td><td>收款人账号。</td></tr><tr><td>payee_name</td><td>string</td><td>收款人姓名。</td></tr><tr><td>created_at</td><td>string</td><td>下单时间。UTC+0 时间。</td></tr></tbody></table><p>示例：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;client_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;01hcd0d0c2qh9wy5efm5sxrk38&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100.00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;transfer_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100000012023072123389872&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;out_transfer_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20230101000000&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5001&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;payee_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;payee_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sammy Shark&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;created_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-01-01T01:01:01.000000Z&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="示例代码" tabindex="-1"><a class="header-anchor" href="#示例代码" aria-hidden="true">#</a> 示例代码</h3><h5 id="php-示例代码" tabindex="-1"><a class="header-anchor" href="#php-示例代码" aria-hidden="true">#</a> PHP 示例代码</h5><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$secret</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;YOUR CLIENT SECRET&#39;</span><span class="token punctuation">;</span>

<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;{API_URL}/api/v1/transfers&quot;</span><span class="token punctuation">;</span>

<span class="token variable">$headers</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string double-quoted-string">&quot;Accept: application/json&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;client_key&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;YOUR CLIENT KEY&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;amount&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;100.00&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;channel_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;1000&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;out_trade_no&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;20230101000000&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;notify_url&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;https://example.com/notify/url&#39;</span><span class="token punctuation">,</span>

    <span class="token string single-quoted-string">&#39;payee_account&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;1234567890&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;payee_name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Sammy Shark&#39;</span><span class="token punctuation">,</span>

    <span class="token string single-quoted-string">&#39;extra&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;bank_code&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;BANK&#39;</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;signature&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">signed</span><span class="token punctuation">(</span>
    <span class="token function">createStringToSign</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$secret</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_HTTPHEADER</span><span class="token punctuation">,</span> <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$httpStatus</span> <span class="token operator">=</span> <span class="token function">curl_getinfo</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLINFO_HTTP_CODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$httpStatus</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$httpStatus</span> <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$httpStatus</span> <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// successful</span>
<span class="token punctuation">}</span>
    
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$httpStatus</span> <span class="token operator">&gt;=</span> <span class="token number">400</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$httpStatus</span> <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// client error</span>
<span class="token punctuation">}</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$httpStatus</span> <span class="token operator">&gt;=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// server error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10);function R(N,E){const t=p("RouterLink");return o(),l("div",null,[r,n("table",null,[d,n("tbody",null,[k,v,n("tr",null,[g,m,b,h,_,n("td",null,[c(t,{to:"/transfers/channels.html"},{default:i(()=>[s("查看")]),_:1})])]),q,f,y,$,x,S])]),T])}const L=e(u,[["render",R],["__file","create.html.vue"]]);export{L as default};
